import{g as I,S as x,p as C,u as N,d as P,t as A,e as T,l as O,r as M}from"./caseStudy-LjkbUIdO.js";import"./main-CvIPNC-6.js";I.registerPlugin(x);const y=["1","2","3","4"],S={1:"marketing-management",2:"design-system",3:"energy-tracker",4:"figma-plugin"},$=Object.fromEntries(Object.entries(S).map(([t,n])=>[n,t]));function R(){const n=document.documentElement.getAttribute("data-project-id");if(n)return n;const d=window.location.pathname.replace(/^\//,"").replace(/\.html$/,"");return $[d]||null}function j(t){const n=document.querySelector(".cs-hero-title"),s=document.querySelector(".cs-hero-subtitle"),d=document.querySelector(".cs-hero-company"),l=document.querySelector(".cs-hero-overview");n&&(n.innerHTML=t.title),s&&(s.innerHTML=t.subtitle),d&&(d.innerHTML=t.company||""),l&&(l.innerHTML=t.cardOverview);const a=document.querySelector(".cs-hero-images");if(a){a.innerHTML="";let c=[];t.heroImage?c=[t.heroImage]:t.heroImages&&(c=t.heroImages),c.forEach(i=>{const e=document.createElement("a");e.href=i,e.className="glightbox",e.setAttribute("data-gallery","case-study-gallery"),e.setAttribute("data-title",`${t.title}`);const o=document.createElement("img");o.src=i,o.alt=`${t.title} preview`,o.loading="eager",e.appendChild(o),a.appendChild(e)})}const m=document.querySelector(".cs-metrics-grid"),g=document.querySelector(".cs-hero-metrics");m&&t.detailMetrics&&(m.innerHTML="",g&&(g.innerHTML=""),t.detailMetrics.forEach(c=>{const i=T(c);if(m.appendChild(i),g){const e=T(c);g.appendChild(e)}}));const u=document.querySelector(".cs-content-container");u&&(t.contentFile?(u.innerHTML='<div class="cs-loading">Loading case study content...</div>',O(t.contentFile).then(c=>{u.innerHTML="";const i={...t,...c};if(c.subtitle){const e=document.querySelector(".cs-hero-subtitle");e&&(e.innerHTML=c.subtitle)}if(c.contentBlocks){const e=c.contentBlocks.find(o=>o.type==="story-hook");if(e&&l){l.innerHTML="",l.className="cs-hero-overview cs-story-hook-style";const o=document.createElement("blockquote");if(o.className="cs-story-hook-quote",o.innerHTML=e.quote,l.appendChild(o),e.context){const r=document.createElement("p");r.className="cs-story-hook-context",r.innerHTML=e.context,l.appendChild(r)}}}if(c.detailMetrics){const e=document.querySelector(".cs-metrics-grid"),o=document.querySelector(".cs-hero-metrics");e&&(e.innerHTML="",o&&(o.innerHTML=""),c.detailMetrics.forEach(r=>{const h=T(r);if(e.appendChild(h),o){const p=T(r);o.appendChild(p)}}))}c.contentBlocks&&c.contentBlocks.forEach(e=>{if(e.type==="story-hook")return;const o=M(e,i);o&&u.appendChild(o)}),setTimeout(()=>{P(),H(),b()},100)}).catch(c=>{console.error("Error loading case study content:",c),u.innerHTML='<div class="cs-error">Error loading content. Please try again.</div>'})):t.contentBlocks&&(u.innerHTML="",t.contentBlocks.forEach(c=>{if(c.type==="story-hook")return;const i=M(c,t);i&&u.appendChild(i)}),setTimeout(()=>{H(),b()},100)))}function w(t){const n=document.getElementById("project-content");n&&(n.innerHTML=`
      <div class="cs-error">
        <h2>Error</h2>
        <p>${t}</p>
        <a href="/" class="cs-error-link">Back to Projects</a>
      </div>
    `)}function F(t){const n=document.querySelector(".cs-breadcrumbs");if(!n)return;n.innerHTML="";const s=y.indexOf(t),d=s>0?s-1:y.length-1,l=s<y.length-1?s+1:0,a=y[d],m=y[l],g=C[a],u=C[m],c=S[a],i=S[m],e=document.createElement("a");e.className="cs-breadcrumb-nav cs-breadcrumb-prev",e.href=`/${c}`,e.innerHTML=`
    <span class="cs-nav-label">← Previous</span>
    <span class="cs-nav-title">${g.title}</span>
  `,n.appendChild(e);const o=document.createElement("a");o.className="cs-breadcrumb-logo",o.href="/",o.setAttribute("aria-label","Back to home"),o.innerHTML=`
    <img src="/17b81efd17076f9f44d848e6169d69edec56397d.png" alt="Silvia Travieso Logo" />
  `,n.appendChild(o);const r=document.createElement("a");r.className="cs-breadcrumb-nav cs-breadcrumb-next",r.href=`/${i}`,r.innerHTML=`
    <span class="cs-nav-label">Next →</span>
    <span class="cs-nav-title">${u.title}</span>
  `,n.appendChild(r)}function H(){const t=document.querySelector("#project-content"),n=document.querySelector(".cs-sticky-header"),s=document.querySelector(".cs-metrics");if(console.log("setupPageHeroScrollAnimation called"),console.log("projectContent:",t),console.log("stickyHeader:",n),console.log("metricsSection:",s),!t||!n){console.error("Missing elements for hero scroll animation");return}let d=!1;const l=()=>{console.log("handleScroll called"),d||(window.requestAnimationFrame(()=>{const a=window.pageYOffset||document.documentElement.scrollTop;console.log("Scroll event - scrollTop:",a),a>0?(console.log("Adding scrolled class"),n.classList.add("scrolled"),s&&(s.style.display="none")):(console.log("Removing scrolled class"),n.classList.remove("scrolled"),s&&(s.style.display="block")),d=!1}),d=!0)};console.log("Attaching scroll listener..."),window.addEventListener("scroll",l,{passive:!0}),document.addEventListener("scroll",l,{passive:!0}),console.log("Testing scroll position on init:",window.pageYOffset)}function b(){const t=document.querySelector("#project-content");if(!t)return;const n=document.querySelector(".cs-side-nav"),s=document.querySelector(".cs-side-nav-list"),d=document.querySelector(".cs-side-nav-indicator"),l=t.querySelector(".cs-content-container");if(!n||!s||!d||!l){console.log("Missing side nav elements");return}const a=[],m=[];if(l.querySelectorAll(".cs-block").forEach(i=>{const e=i.getAttribute("data-section-title");e&&(a.push(i),m.push(e))}),a.length===0){console.log("No sections with sectionTitle found");return}console.log(`Found ${a.length} navigable sections`),s.innerHTML="",a.forEach((i,e)=>{i.id=`cs-section-${e+1}`;const o=document.createElement("li");o.className="cs-side-nav-item";const r=document.createElement("a");if(r.className="cs-side-nav-link",r.href=`#cs-section-${e+1}`,r.dataset.sectionIndex=e,m[e]){const p=document.createElement("span");p.className="cs-side-nav-label",p.textContent=m[e],r.appendChild(p)}const h=document.createElement("span");h.className="cs-side-nav-number",h.textContent=String(e+1).padStart(2,"0"),r.appendChild(h),r.addEventListener("click",p=>{p.preventDefault(),i.scrollIntoView({behavior:"smooth",block:"start"})}),o.appendChild(r),s.appendChild(o)});const u=()=>{(window.pageYOffset||document.documentElement.scrollTop)>200?n.classList.add("active"):n.classList.remove("active")};c(),window.addEventListener("scroll",()=>{requestAnimationFrame(()=>{u(),c()})},{passive:!0}),window.addEventListener("resize",c);function c(){const i=s.querySelectorAll(".cs-side-nav-link"),e=window.pageYOffset||document.documentElement.scrollTop,o=window.innerHeight,r=e+o/2;let h=0,p=1/0;a.forEach((f,v)=>{const L=f.getBoundingClientRect(),B=e+L.top+L.height/2,k=Math.abs(r-B);k<p&&(p=k,h=v)}),i.forEach((f,v)=>{v===h?f.classList.add("active"):f.classList.remove("active")});const E=i[h];if(E){const f=E.getBoundingClientRect(),v=s.getBoundingClientRect(),L=f.top-v.top;I.to(d,{y:L,height:f.height,duration:.4,ease:"power2.out"})}}console.log("Side navigation initialized")}async function q(){const t=R();if(!t){w("Project ID not found");return}console.log("Loading project:",t);const n=C[t];if(!n){w("Project not found");return}const s=document.getElementById("project-content");s&&n.theme&&s.setAttribute("data-theme",n.theme),j(n),N(n),F(t),setTimeout(()=>{P()},500),A(t,n.title),setTimeout(()=>{b()},600),console.log("Project page initialized")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",q):q();
